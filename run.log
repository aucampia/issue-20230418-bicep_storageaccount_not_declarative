+ : zurqqd
+ : westeurope
+ : rg-iwanaucamp-sandbox-000
++ az account show --output tsv --query id
+ AZURE_SUBSCRIPTION_ID=c2142b5a-4808-45df-883f-2979efeac203
+ AZURE_STORAGE_ACCOUNT_ID=/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/stzurqqd
+ declare -p PROJECT_KEY AZURE_LOCATION AZURE_RESOURCE_GROUP AZURE_SUBSCRIPTION_ID AZURE_STORAGE_ACCOUNT_ID
declare -x PROJECT_KEY="zurqqd"
declare -- AZURE_LOCATION="westeurope"
declare -x AZURE_RESOURCE_GROUP="rg-iwanaucamp-sandbox-000"
declare -- AZURE_SUBSCRIPTION_ID="c2142b5a-4808-45df-883f-2979efeac203"
declare -- AZURE_STORAGE_ACCOUNT_ID="/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/stzurqqd"
++ az group exists --name rg-iwanaucamp-sandbox-000
+ true
+ BICEP_PARAMETERS=("--parameters" "projectKey=${PROJECT_KEY}")
+ az bicep version
Bicep CLI version 0.16.2 (de7fdd2b33)

+ read -p 'Press enter to continue'
Press enter to continue+ az deployment group create --template-file without_acl.bicep --parameters projectKey=zurqqd --resource-group rg-iwanaucamp-sandbox-000 --mode Complete --name rg-iwanaucamp-sandbox-000
{
  "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Resources/deployments/rg-iwanaucamp-sandbox-000",
  "location": null,
  "name": "rg-iwanaucamp-sandbox-000",
  "properties": {
    "correlationId": "e6f6ae0a-f724-4523-b3de-72fb507ca90b",
    "debugSetting": null,
    "dependencies": [
      {
        "dependsOn": [
          {
            "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd/blobServices/default",
            "resourceGroup": "rg-iwanaucamp-sandbox-000",
            "resourceName": "sttmpzurqqd/default",
            "resourceType": "Microsoft.Storage/storageAccounts/blobServices"
          }
        ],
        "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd/blobServices/default/containers/captured-events",
        "resourceGroup": "rg-iwanaucamp-sandbox-000",
        "resourceName": "sttmpzurqqd/default/captured-events",
        "resourceType": "Microsoft.Storage/storageAccounts/blobServices/containers"
      },
      {
        "dependsOn": [
          {
            "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd",
            "resourceGroup": "rg-iwanaucamp-sandbox-000",
            "resourceName": "sttmpzurqqd",
            "resourceType": "Microsoft.Storage/storageAccounts"
          }
        ],
        "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd/blobServices/default",
        "resourceGroup": "rg-iwanaucamp-sandbox-000",
        "resourceName": "sttmpzurqqd/default",
        "resourceType": "Microsoft.Storage/storageAccounts/blobServices"
      }
    ],
    "duration": "PT24.6905396S",
    "error": null,
    "mode": "Complete",
    "onErrorDeployment": null,
    "outputResources": [
      {
        "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd",
        "resourceGroup": "rg-iwanaucamp-sandbox-000"
      },
      {
        "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd/blobServices/default",
        "resourceGroup": "rg-iwanaucamp-sandbox-000"
      },
      {
        "id": "/subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/sttmpzurqqd/blobServices/default/containers/captured-events",
        "resourceGroup": "rg-iwanaucamp-sandbox-000"
      }
    ],
    "outputs": null,
    "parameters": {
      "location": {
        "type": "String",
        "value": "westeurope"
      },
      "projectKey": {
        "type": "String",
        "value": "zurqqd"
      }
    },
    "parametersLink": null,
    "providers": [
      {
        "id": null,
        "namespace": "Microsoft.Storage",
        "providerAuthorizationConsentState": null,
        "registrationPolicy": null,
        "registrationState": null,
        "resourceTypes": [
          {
            "aliases": null,
            "apiProfiles": null,
            "apiVersions": null,
            "capabilities": null,
            "defaultApiVersion": null,
            "locationMappings": null,
            "locations": [
              null
            ],
            "properties": null,
            "resourceType": "storageAccounts/blobServices/containers",
            "zoneMappings": null
          },
          {
            "aliases": null,
            "apiProfiles": null,
            "apiVersions": null,
            "capabilities": null,
            "defaultApiVersion": null,
            "locationMappings": null,
            "locations": [
              null
            ],
            "properties": null,
            "resourceType": "storageAccounts/blobServices",
            "zoneMappings": null
          },
          {
            "aliases": null,
            "apiProfiles": null,
            "apiVersions": null,
            "capabilities": null,
            "defaultApiVersion": null,
            "locationMappings": null,
            "locations": [
              "westeurope"
            ],
            "properties": null,
            "resourceType": "storageAccounts",
            "zoneMappings": null
          }
        ]
      }
    ],
    "provisioningState": "Succeeded",
    "templateHash": "8326585239038587764",
    "templateLink": null,
    "timestamp": "2023-05-02T10:15:46.303419+00:00",
    "validatedResources": null
  },
  "resourceGroup": "rg-iwanaucamp-sandbox-000",
  "tags": null,
  "type": "Microsoft.Resources/deployments"
}
+ az group export --name rg-iwanaucamp-sandbox-000 --resource-ids /subscriptions/c2142b5a-4808-45df-883f-2979efeac203/resourceGroups/rg-iwanaucamp-sandbox-000/providers/Microsoft.Storage/storageAccounts/stzurqqd
+ tee storage_account-step1.json
{
  "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {},
  "resources": [],
  "variables": {}
}
+ read -p 'Press enter to continue'
Press enter to continue+ az deployment group create --template-file with_acl.bicep --parameters projectKey=zurqqd --resource-group rg-iwanaucamp-sandbox-000 --mode Complete --name rg-iwanaucamp-sandbox-000
